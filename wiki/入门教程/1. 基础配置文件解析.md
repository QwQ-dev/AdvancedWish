# Advanced Wish - Wiki
---
> 此篇 Wiki 更新时间: 2023.3.4
---
> #### Wiki - 1. 基础配置文件解析
- 此章将会解析 advancedWish.yml / message.yml 文件。
- 让读者知道其中选项的作用与部分功能讲解。
---
> #### advancedWish.yml - 基础配置解析
```
CONFIG-VERSION: 61
```

- 配置文件版本号，插件将会解析此处的版本号以提醒您更新配置文件。

```
WISH:
  - "基础许愿池"
```
- 注册的许愿池，插件提供一个默认的基础许愿池供您参考。
- 之后的许愿池注册都需要将许愿池文件名填写在此处 (文件需在 "/Wish" 文件夹下)。

```
# Mongo 数据库设置
#  若开启则会将玩家的数据与日志存储至 Mongo 数据库
#  若关闭则会以 Json 的形式存储，Json 的存放路径可以在 GUARANTEED-PATH / LOGS-PATH 进行更改
#  我们支持将 Json 数据迁移至 Mongo 数据库，请查看 TRANSFORMATION-JSON-TO-MONGO 选项
MONGO:
  ENABLE: false

  IP: 127.0.0.1
  PORT: 27017

  # 使用用户名或密码 (若没有设置用户密码则两个都不填写)
  AUTH:
    USER: ""
    PASSWORD: ""

  # 自定义 Mongo 连接 URL
  #  如果启用则需要自己写连接 URL，上面的指定内容全部作废，AdvancedWish 数据库名: AdvancedWish
  #  实例: mongodb://USER:PWD@IP:PORT/AdvancedWish - 使用用户密码登陆指定服务器的 AdvancedWish 数据库
  CUSTOM-URL: ""。。
```
- Mongo 数据库支持，填写您的 IP / Port 来进行连接。
- 可选使用登陆凭证，填写 User / Password 来进行连接，库名为 AdvancedWish。
- 可选自定义 Mongo 的连接 URL。

```
# 数据转换:
#  注意，此功能的用处在于将 Json 数据迁移至 Mongo，不支持 Mongo 迁移至 Json
#  在开启此功能前请先启用 Mongo，并且配置好 Mongo 数据库设置，迁移完成后服务器将会自动关闭，不会删除 Json 文件，关闭后您需要手动关闭此选项
#  读取的 Json 路径为 GUARANTEED-PATH / LOGS-PATH 规定的路径
TRANSFORMATION-JSON-TO-MONGO: false
```
- 数据转换开关，旨在将 Json 文件数据转换至 Mongo 数据库。
- 只支持 Json -> Mongo 单向转换，不支持 Mongo -> Json。
- 使用后转换成功会发送信息，并且关闭服务器，您需要手动关闭此选项后重新开启服务器。

```
# 自动检查是否具有新版本
UPDATE-CHECKER: true

# 检查周期，当自动更新开启后多少分钟进行一次检查
CHECK-CYCLE: 60
```
- 自动检查与检查周期，若不为最新版则会在控制台进行报告，并在玩家进入时给 OP 玩家提醒更新。

```
# 管理员指令权限
ADMIN-PERM: "aw.admin"
```
- 管理员指令权限，用于一些特殊指令 (游戏内 /aw)。

```
# 增率 (保底率) 存放路径 (Json)
#  如果您想要保底率进行跨服，并且不使用 Mongo，那么只需要将子服的所有此路径全部填写为一样的即可
#  如果不进行填写那么默认在服务端插件文件夹下的 /PlayerGuaranteed 文件夹内
GUARANTEED-PATH: ""

# 玩家日志存放路径 (Json)
#  如果您想要日志进行跨服，并且不适用 Mongo，那么只需要将子服的所有此路径全部填写为一样的即可
#  如果不进行填写那么默认在服务端插件文件夹下的 /PlayerLogs 文件夹内
LOGS-PATH: ""

# 玩家缓存文件存放路径 (Json)
#  此路径下将存储部分玩家缓存信息，这将代替 Redis 来更好地完成跨服抽奖，无论是否使用 Mongo，缓存都只会以 Json 文件形式存储
#  如果您想要实现跨服抽奖，那么只需要将子服的所有此路径全部填写为一样的即可
#  如果您只是单端使用，或不想进行跨服，那么您完全没必要更改它，需要注意的是，您绝对不能够手动编辑这里的文件
#  如果不进行填写那么默认在服务端插件文件夹下的 /PlayerCache 文件夹内
DO-LIST-CACHE-PATH: ""
```
- 这些路径下的任何文件您都不应该手动进行更改!
- 若不使用 Mongo，Advanced Wish 则会把玩家数据存储到此处规定的路径。若不填写则会在默认路径。
- 需要注意的是，此处的玩家缓存路径只是针对部分缓存，仍有一部分缓存并不支持您自定义位置。

```
# bStats 将统计此插件的使用信息，不会收集隐私信息，请放心开启
# bStats: https://bstats.org/plugin/bukkit/AdvancedWish/16990
BSTATS: true
```
- bStats 开关。

```
# 这里将设置特殊情况时取消玩家进入服务器
CANCEL-LOGIN-REASONS:
  # 当服务器正在保存玩家缓存时玩家进入服务器，我们将取消此次进入
  SAVING-CACHE: "&c服务器正在处理您的缓存，请稍等几秒后进入!"

  # 当服务器正在处理玩家的缓存时，有另一名相同的玩家进入了服务器，尽管这是不应该发生的，以防万一
  LOADING-CACHE: "&a一个相同的玩家已经进入此服务器，这不应该发生!"

  # 当服务器延迟处理玩家缓存后，玩家在等待途中离线，在延迟未结束时又尝试加入
  WAITING-LOADING-CACHE: "&c服务器正在等待处理您的缓存，请等待一会后进入!"
```
- 这里是安全措施，如果玩家进入时可能出现一些安全性问题则会以这些理由拒绝加入。

```
# 玩家进入多久之后开始加载玩家数据
# 如果您自定义了玩家缓存文件存放路径，那么这个值应该全部相同，并且这个值不应该小于 2s
# 如果这个值过小，会导致还未存储玩家缓存完毕便进行加载，会加载到空的缓存，如果过大，那么玩家需要等待非常久才会加载，我推荐 5s
# 如果您的服务器开始就拥有其他标题效果发送，那么您也可以增高这个值，使得 Advanced Wish 的标题发送靠后，更加美观
WAIT-LOADING: 5 # 单位秒 - 不可小数 - 不支持算数
```
- 若您更改了玩家缓存文件存放路径，或希望进行许愿跨服，那么您应该将此值设置为 5s 左右，以确保正常读写。
- 若玩家出现跨服后缓存不同步的情况那么请增高这个数值，但是此数值不应该太高，否则会影响玩家体验。
---
> #### message.yml - 基础配置解析
- 这一切都不需要解析，根据您的需要，更改它。
---





